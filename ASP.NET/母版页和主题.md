# 母版页和主题

- 母版页
    - 重用技术，为应用程序页面创建一致的布局，模板
    - 母版页是拓展名为.master的文件，由@Master指令识别，该指令的声明和属性：
        - <@Master Language="C#">
        - CodeFile：指定包含分部类的单独文件的名称，该分部类具有事件处理程序和特定于母版页的其他代码
        - Debug：指示是否使用调试符号来编译母版页。如果要使用调试符号进行编译，则为true，否则为false
        - Inherits：指定供页继承的代码隐藏类，可以是从MasterPage类派生的任何类
        - Language：指定在对页中所有内联呈现（<% %>和<%= %>）和代码声明块进行编译时使用的语言。值可以是支持的任何语言，包括VB、C#、Jscript
        - Src：指定在请求页使动态编译的代码隐藏类的源文件名称。可以选择将页的编程逻辑包含在代码隐藏类中或aspx文件的代码声明块中
        - MasterPageFile：指示用作某个母版页的master文件。定义嵌套母版页方案中的子母版页时，在母版页使用MasterPageFile属性
        - AutoEventWireup：指示是由可以使用语法Page且不使用任何显示挂钩或事件签名，为特定的生命周期阶段定义简单的事件处理程序。如果启用了事件自动连接，则为true，否则为false，默认为true
        - ClassName：指定自动从标记生成并在处理母版页时自动进行编译的类的类名。此值可以是任何有效的类名，并且可以包括命名空间
    - 母版页的运行机制
        - 代码结构
            - 母版页：ContentPlaceHolder控件
            - 内容页：Content控件，设置ContentPlaceHolderID
        - 运行过程
            - 用户通过键入内容页的URL来请求某页
            - 获取该页后，读取@page指令，如果该指令引用一个母版页，则也读取该母版页。如果这是第一次请求这两个页，则这两个页都要进行编译
            - 包含更新内容的模板页合并到内容页的控件树中
            - 各个Content控件的内容合并到母版页中相应的ContentPlaceHolder控件中
            - 浏览器中呈现得到的合并页
        - 事件顺序
            - 母版页控件Init事件
            - 内容页Content控件Init事件
            - 母版页Init事件
            - 内容页Init事件
            - 内容页Load事件
            - 母版页Load事件
            - 内容页Content控件Load事件
            - 内容页PreRender事件
            - 母版页PreRender事件
            - 母版页控件PreRender事件
            - 内容页Content控件PreRender事件
    - 访问母版页控件和属性：public
    - 动态加载母版页
        void Page_PreInit(object sender, EventArgs e)
        {
                this.MasterPageFile = "xx.master";
        }
        
- 主题
    - 控制页面的样式
    - 主题的构成
        - 皮肤文件
            - 拓展名.skin，定义控件的外观
        - 级联样式表
            - Cascading Stytle Sheet，CSS，层叠样式表
        - 图像和其他资源
    - 应用范围
        - 每个主题是\App_Themes文件夹下的一个子文件夹
        - 要在页面上设置EnableTheming属性为true
        - 要在Page_Preinit事件之前动态设置主题
    - 主题的使用
        - 在某个网页使用主题：<#@Page Theme="主题1" %>
        - 在整个项目使用主题：Web.config：<system.web><Pages Themes="主题1"></system.web>
        - 优先级：主题大于控件
        - SkinID：内容页控件与主题控件SkinID相同
    - 动态加载主题：Page_PreInit事件中
        - Page.Theme = "theme";
    - 动态改变SkinID：
        - TextBox1.SkinID = "blue";
    - 禁用主题：
        - 整页禁用：<%@Page EnableTheming = "false"%>
        - 控件禁用：<asp:Calender runat="server" EnableTheming="false">
