# 数据绑定

- 数据绑定
    - 语法：<%#数据源%>
    - 绑定数据：Page.DataBind()
- 数据的简单绑定
    - 绑定到变量
        - aspx文件
            - <%#name%>
        - aspx.cs文件
            - string name = "jack"
            Page.DataBind();
    - 绑定到表达式
        - aspx文件
            - <%#number/8%>
        - aspx.cx文件
            - int number = 8;
            Page.DataBind()
    - 绑定到集合
        - aspx文件
            - <asp:DataGrid ID="DataGrid1" runat="server" DataSource="<%#myArray%>">
        - aspx.cs文件
            - ArrayList myArray = new ArrayList()
            DataGrid1.DataBind()
    - 绑定到方法的结果
        - aspx文件
            - <%#jack(tom)%>
        - aspx.cs文件
            - tom = 2;
            jack(int x)
            {
                return x
            }
            Page.DataBind();
- 数据的复杂绑定
    - 绑定到DataSet
        - aspx文件
            - <asp:DataGrid ID="DataGrid1" runat="server" />
        - aspx.cs文件
            - DataSet ds = new DataSet()
            DataGrid1.DataSource = ds
            DataGrid1.DataBind()
    - 绑定到数据库
        - aspx文件
            - <asp:DataGrid ID="DataGrid1" runat="server" DataSource="<%#myArray%>">
        - aspx.cs文件
            - SqlCommand sc = new SqlCommand(sql, con)
            DataGrid1.DataSource=sc.ExecuteReader()
            DataGrid1.DataBind()
- 常用控件数据绑定
    - 绑定步骤
        - 将用于显示数据的控件添加到页面中
        - 将数据源对象赋给控件的DataSource属性
        - 执行控件的DataBind方法
    - 控件的数据绑定
        - DataSet ds = new DataSet()
        ListBox1.DataSource = ds.Tables["new"]
        ListBox1.DataTextField = "Title"
        ListBox1.DataValueField = "ID"
        ListBox1.DataBind()
- 数据源控件
    - 作用
        - 让数据绑定控件从数据源控件中获取数据，数据的获取或绑定都是自动完成的，不需要调用DataBind方法
        - 利用数据源控件更新数据源
    - 内置数据源控件
        - ObjectDataSource
        - SqlDataSource
        - EntityDataSource
        - LinqDataSource
        - XmlDataSource
        - SiteMapDataSource
    - SqlDataSource控件
        - 控件属性
            - 执行数据库操作命令
                - 选择：SelectCommand
                - 更新：UpdateCommand
                - 删除：DeleteCommand
                - 插入：InsertCommand
                - 可以把带参数的SQL语句赋予这四个属性：UpdateCommand = "UPDATE [tb_x] SET [title] = @Title"，参数的属性由InsertParameters、SelectParameters、UpdateParameters、DeleteParameters设置
            - 返回DataSet或DataReader对象
                - 通过设置控件的DataSourceMode属性来指定要返回的格式
            - 进行缓存
                - 默认情况下不启用缓存，将EnableCaching属性设置为true，便可以启用缓存
            - 进行检索
                - 如果要求空间从数据库中检索数据，需要设置以下属性
                    ◊ ProviderName，设置为ADO.NET提供程序的名称，该提供程序表示正在使用的数据库
                    ◊ ConnectionString，设置为用于数据库的连接字符串
                    ◊ SelectCommand，设置为从数据库中返回数据的SQL查询或存储过程
