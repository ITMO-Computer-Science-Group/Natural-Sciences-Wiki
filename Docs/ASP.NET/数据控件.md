# 数据控件

- 数据控件概述
      - GridView：能够显示一整张表的数据
      - DetailsView：一次显示一条记录的数据控件
      - FormView：一次显示一条记录的数据控件，与DetailView不同的是，FromView是基于模板的，可以使布局具有灵活性
      - DataList：可用来自定义显示各行数据库信息的数据库控件，显示的格式在创建的模板中定义
      - Repeater：它能生成一系列单个项，可以使用模板定义页面上单个项布局的数据控件，在页面运行时，该控件为数据源中的每个项重复相应的布局
      - ListView：按模板和样式定义的格式显示数据
- GridView控件
      - 以表格方式显示数据源中的数据，并提供分页、排序、过滤、编辑等功能
      - 控件常用属性

            | 属性                  | 说明                                                                    |
      |---------------------|-----------------------------------------------------------------------|
      | AllowPaging         | 获取或设置指示是否启用分页的值，默认为false                                              |
      | AllowSorting        | 获取或设置指示是否启用排序的值                                                       |
      | AutoGenerateColumns | 获取或设置一个值，该值指示是否为数据源中的每一字段自动创建BoundColumn对象并在GridView控件中显示这些对象，默认为true |
      | Columns             | 获取表示GridView控件各列对象的集合                                                 |
      | PageIndex           | 获取或设置当前页的索引                                                           |
      | DataSource          | 获取或设置源，该源包含用于填充控件中的项的值列表                                              |
      | ForeColor           | 获取或设置Web服务器控件的前景色（通常是文本颜色）                                            |
      | HeaderStyle         | 获取GridView控件中标题部分的样式属性                                                |
      | PageCount           | 获取显示GridView控件中各项所需的总页数                                               |
      | PageSize            | 获取或设置要在GridView控件的单页上显示的项数                                            |
      | SelectedIndex       | 获取或设置GridView控件中选定项的索引                                                |
      | ShowFooter          | 获取或设置一个值，该值指示是否在GridView控件中显示页脚                                       |
      | ShowHeader          | 获取或设置一个值，该值指示是否在GridView控件中显示页眉                                       |

      - 控件常用方法

      | 方法        | 说明                           |
      |-----------|------------------------------|
      | DataBind  | 将数据源绑定到GridView控件            |
      | DeleteRow | 从数据源中删除位于指定索引位置的记录           |
      | Sort      | 根据指定的排序表达式和方向对GridView控件进行排序 |
      | UpdateRow | 使用行的字段值更新位于指定行索引位置的记录        |

      - 控件常用事件
      
      | 事件                    | 说明                     |
      |-----------------------|------------------------|
      | PageIndexChanged      | 在控件处理分页操作之后发生          |
      | PageIndexChanging     | 在单击导航按钮后，控件处理分页操作之前发生  |
      | RowCancelingEdit      | 单击取消按钮以后，在该行退出编辑模式之前发生 |
      | RowCommand            | 当单击控件中的按钮时发生           |
      | RowCreated            | 在控件创建行时发生              |
      | RowDataBound          | 在控件将数据行绑定到数据时发生        |
      | RowDeleted            | 在控件删除该行之后发生            |
      | RowDeleting           | 在控件删除该行之前发生            |
      | RowEditing            | 在控件进入编辑模式之前发生          |
      | RowUpdated            | 在控件对该行进行更新之后发生         |
      | RowUpdating           | 在控件对该行进行更新之前发生         |
      | SelectedIndexChanged  | 在控件对相应的选择操作进行处理之后发生    |
      | SelectedIndexChanging | 在控件对相应的选择操作进行处理之前发生    |
      | Sorted                | 在控件对相应的排序操作进行处理之后发生    |
      | Sorting               | 在控件对相应的排序操作进行处理之前发生    |

      - 控件的列类型
      
      | 列类型            | 说明                                          |
      |----------------|---------------------------------------------|
      | BoundField     | 显示数据源中某个字段的值，默认列类型                          |
      | ButtonField    | 为控件中的每个项显示一个命令按钮，这样可以创建一列自定义按钮控件            |
      | CheckBoxField  | 为控件中的每个项显示一个复选框，此列类型通常用于显示布尔值               |
      | CommandField   | 显示用来执行选择、编辑、删除操作的预定义命令按钮                    |
      | HyperLinkField | 将数据源中某个字段的值显示为超链接，此列字段类型允许将另一个字段绑定到超链接的URL  |
      | ImagField      | 为控件中的每一项显示一个图像                              |
      | TemplateField  | 根据指定的模板为GridView控件中每一项显示用户定义的内容，允许创建自定义的列字段 |

      - 控件的分页
            - 设置AllowPaging为true
            - 设置PagerSetting类的mode属性分页显示模式，mode的值：
                  - NextPrevious：上一页按钮和下一页按钮
                  - NextPreviousFirstLast：上一页按钮、下一页按钮、第一页按钮、最后一页按钮
                  - Numeric：编号按钮
                  - NumericFirstLast：编号按钮、第一页按钮、最后一页按钮
            - 示例：
                  <asp:GridView ID="GridView1" runat="server" AllowPaging="True">
                              <PagerSettings Mode="NextPreviousFirstLast" NextPageText="后一页" >
                  </asp:GridView>
      - 控件的排序
            - 设置AllowSorting为true
            - 标题会变成LinkButton类型
            - 设置每个列的SortExpression属性为空即可禁用这个列的排序，默认是该列的名称
      - 控件的数据操作：增删改
            - 启用删除或修改功能
                  - 将AutoGenerateEditButton属性设置为true以启用修改，将AutoGenerateDeleteButton属性设置为true以启用删除
                  - 添加一个CommandField列，并将其ShowEditButton属性设置为true以启用修改，将其ShowDeleteButton属性设置为true以启用删除
                  - 创建一个TemplateField，其中ItemTemplate包含多个命令按钮，要进行更新时可将CommandName设置为Edit，要进行删除时可设置为Delete
                  - 在SqlDataSource控件添加DeleteCommand属性或UpdateCommand属性的SQL语句
                  - 添加DeleteParameters或UpdateParameters
- Repeater控件：完全由开发者驱动，在模板间拆分HTML标记
      - Template模板
            - ItemTemplate：必选，完成对列表内容和布局的定义，要包含<tr>
            - AlternatingItemTemplate：决定替换项的布局和内容
            - SeparatorTemplate：在交替项之间出现分隔符
            - HeaderTemplate：决定列表表头的布局和内容，要包含开始标记<table>
            - FooterTemplate：决定列表注脚的布局和内容，要包含结束标记</table>
